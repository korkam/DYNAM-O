function y = visual_0.3_35Hz_filter(x)
%DOFILTER Filters input x and returns output y.

% MATLAB Code
% Generated by MATLAB(R) 9.2 and the DSP System Toolbox 9.4.
% Generated on: 16-Oct-2018 19:52:06

%#codegen

% To generate C/C++ code from this function use the codegen command.
% Type 'help codegen' for more information.

persistent Hd;

if isempty(Hd)
    
    % The following code was used to design the filter coefficients:
    %
    % Fstop1 = 0.01;  % First Stopband Frequency
    % Fpass1 = 0.3;   % First Passband Frequency
    % Fpass2 = 35;    % Second Passband Frequency
    % Fstop2 = 40;    % Second Stopband Frequency
    % Astop1 = 60;    % First Stopband Attenuation (dB)
    % Apass  = 1;     % Passband Ripple (dB)
    % Astop2 = 80;    % Second Stopband Attenuation (dB)
    % Fs     = 100;   % Sampling Frequency
    %
    % h = fdesign.bandpass('fst1,fp1,fp2,fst2,ast1,ap,ast2', Fstop1, Fpass1, ...
    %                      Fpass2, Fstop2, Astop1, Apass, Astop2, Fs);
    %
    % Hd = design(h, 'cheby1', ...
    %     'MatchExactly', 'passband', ...
    %     'SystemObject', true);
    
    Hd = dsp.BiquadFilter( ...
        'Structure', 'Direct form II', ...
        'SOSMatrix', [1 0 -1 1 1.15620861574871 0.970669231608454; 1 0 -1 1 ...
        -1.99894991162684 0.999306252795389; 1 0 -1 1 1.01070363214742 ...
        0.90597004518849; 1 0 -1 1 -1.99719815427746 0.99761771751496; 1 0 -1 1 ...
        0.708909945143173 0.816980612312093; 1 0 -1 1 -1.99405523272099 ...
        0.994653949616137; 1 0 -1 1 -1.98612132794102 0.987241462816569; 1 0 -1 ...
        1 0.162220802841955 0.680178084493845; 1 0 -1 1 -1.95374624936586 ...
        0.957148079004012; 1 0 -1 1 -0.652505775791892 0.498737358760511; 1 0 -1 ...
        1 -1.54231491348559 0.600448865117779], ...
        'ScaleValues', [0.879700144301862; 0.879700144301862; ...
        0.848547824798748; 0.848547824798748; 0.787246333884009; ...
        0.787246333884009; 0.66686801911313; 0.66686801911313; ...
        0.439567090520253; 0.439567090520253; 0.19977556744111; 1]);
end

s = double(x);
y = step(Hd,s);

